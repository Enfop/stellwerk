<%= form_for(@donation_case, url: donation_case_path(token: @donation_case.token), method: :put) do |f| %>
  <% if @donation_case.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@donation_case.errors.count, "error") %> prohibited this donation_case from being saved:</h2>

      <ul>
      <% @donation_case.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="donation-case-form">
    <%= render :partial => '/donation_cases/form', locals: {f: f} %>

    <%= react_component("Donations", {items: []}) %>
    <%- @donation_case.donations.each do |item| %>
      <%= f.fields_for :donations, item do |donation| %>
        <%= render :partial => '/shared/donation', locals: {donation: donation, item: item} %>
      <% end %>
    <% end %>

    <div class="button button--light donation-case-form__add-donation-case-button">
      Neuer Spendenposten
    </div>
    <%= f.submit "Submit", class: "button--primary button--large donation-case-form__submit-button" %>
  </div>
<% end %>
