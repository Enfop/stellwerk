<%= form_for(@donation_case, url: donation_case_path(token: @donation_case.token), method: :put) do |f| %>
  <% if @donation_case.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@donation_case.errors.count, "error") %> prohibited this donation_case from being saved:</h2>

      <ul>
      <% @donation_case.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  <div class="donation-case-form">
    <%= render :partial => '/donation_cases/form', locals: {f: f} %>

    <%= f.fields_for :donations do |donation| %>
          <div class="donation-item">
            <div class="grid">
              <div class="grid__half">
                <%= donation.label :title %>
                <%= donation.text_field :title %>
                <%= donation.label :amount %>
                <%= donation.text_field :amount %>
                <%= donation.label :best_before_date %>
                <%= donation.text_field :best_before_date %>
                <%= donation.label :availible_from %>
                <%= donation.text_field :availible_from %>
              </div>
              <div class="grid__half">
                <label>Tiefkühlware</label>
                <%= donation.radio_button(:froozen, "true") %>
                <span class="radio__label">Ja</span>
                <%= donation.radio_button(:froozen, "false") %>
                <span class="radio__label">Nein</span>
                <label>Tiefkühlware</label>
                <%= donation.radio_button(:supporting_document, "true") %>
                <span class="radio__label">Ja</span>
                <%= donation.radio_button(:supporting_document, "false") %>
                <span class="radio__label">Nein</span>
                <%= donation.label :fetch_time %>
                <%= donation.text_field :fetch_time %>
              </div>
            </div>
          </div>
        <% end %>

    <%= react_component("Donations", {items: []}) %>

    <%= f.fields_for :donations do |donation| %>
      <%= render :partial => '/shared/donation', locals: {donation: donation} %>
    <% end %>

    <div class="button button--light donation-case-form__add-donation-case-button">
      Neuer Spendenposten
    </div>
    <%= f.submit "Submit", class: "button--primary button--large donation-case-form__submit-button" %>
  </div>
<% end %>
